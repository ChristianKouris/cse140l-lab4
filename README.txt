In the top level code, there is a combinational block and a sequential block. I decided it would be easier to only have one block for each type of logic. The comb block contains the controller and the sequential block contains all of the counters. The testbench itself had to be changed a bit because it was accidentally testing one of the instruction memories addr=61. Everything appears to work as intended since the message was encoded correctly.